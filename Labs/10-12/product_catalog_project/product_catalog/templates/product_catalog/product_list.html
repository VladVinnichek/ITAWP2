{% extends 'product_catalog/base.html' %}

{% block title %}–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ - –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>üì¶ –í—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã</h2>
    <a href="{% url 'product_create' %}" class="btn btn-primary">+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç</a>
</div>

{% if products %}
    <div class="product-grid">
        {% for product in products %}
        <div class="product-card">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                <div>
                    <h3 style="margin: 0; color: #333;">{{ product.name }}</h3>
                    <small style="color: #666;">–ê—Ä—Ç–∏–∫—É–ª: {{ product.sku }}</small>
                </div>
                <div style="font-size: 1.3em; color: #e74c3c; font-weight: bold;">
                    {{ product.price }} —Ä—É–±.
                </div>
            </div>
            
            <p>{{ product.description|truncatewords:20 }}</p>
            
            {% if product.attributes.all %}
            <div style="margin: 10px 0;">
                {% for attr in product.attributes.all %}
                <span class="attribute-badge">
                    <strong>{{ attr.get_attribute_type_display }}:</strong> {{ attr.value }}
                </span>
                {% endfor %}
            </div>
            {% endif %}
            
            <div style="color: #666; font-size: 0.9em; margin: 10px 0;">
                <span style="color: {% if product.status == 'in_stock' %}#27ae60{% elif product.status == 'out_of_stock' %}#e67e22{% else %}#95a5a6{% endif %};">
                    üìä {{ product.get_status_display }}
                </span>
                <span style="margin-left: 15px;">‚≠ê {{ product.rating }}/5</span>
                {% if product.category %}
                <span style="margin-left: 15px;">üìÅ {{ product.category.name }}</span>
                {% endif %}
            </div>
            
            <div class="product-actions">
                <a href="{% url 'product_detail' product.id %}" class="btn btn-primary">–ü—Ä–æ—Å–º–æ—Ç—Ä</a>
                <a href="{% url 'product_edit' product.id %}" class="btn btn-warning">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <a href="{% url 'product_delete' product.id %}" class="btn btn-danger" 
                   onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç {{ product.name }}?')">–£–¥–∞–ª–∏—Ç—å</a>
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div style="text-align: center; padding: 40px;">
        <h3>üòî –ü—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
        <p>–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤. <a href="{% url 'product_create' %}">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç</a>.</p>
    </div>
{% endif %}
{% endblock %}