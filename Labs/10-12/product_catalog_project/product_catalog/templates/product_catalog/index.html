{% extends 'product_catalog/base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤{% endblock %}

{% block content %}
<h2>üõçÔ∏è –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h2>
<p><strong>–í—Ä–µ–º—è:</strong> {{ current_time }}</p>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0;">
    <div style="background: #e8f4fd; padding: 20px; border-radius: 8px; text-align: center;">
        <h3 style="margin: 0; color: #3498db;">üì¶</h3>
        <h4 style="margin: 10px 0;">–í—Å–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h4>
        <p style="font-size: 2em; font-weight: bold; margin: 0; color: #3498db;">{{ total_products }}</p>
    </div>
    <div style="background: #e8f6f3; padding: 20px; border-radius: 8px; text-align: center;">
        <h3 style="margin: 0; color: #27ae60;">üõí</h3>
        <h4 style="margin: 10px 0;">–í –Ω–∞–ª–∏—á–∏–∏</h4>
        <p style="font-size: 2em; font-weight: bold; margin: 0; color: #27ae60;">
            {{ in_stock_count }}
        </p>
    </div>
</div>

<div style="display: flex; gap: 15px; margin: 30px 0;">
    <a href="{% url 'product_list' %}" class="btn btn-primary">üì¶ –í—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã</a>
    <a href="{% url 'product_create' %}" class="btn btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç</a>
    <a href="{% url 'category_list' %}" class="btn btn-warning">üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
</div>

{% if products %}
<h3>üî• –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</h3>
<div class="product-grid">
    {% for product in products %}
    <div class="product-card">
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
            <div>
                <h4 style="margin: 0; color: #333;">{{ product.name }}</h4>
                <small style="color: #666;">–ê—Ä—Ç–∏–∫—É–ª: {{ product.sku }}</small>
            </div>
            <div style="color: #e74c3c; font-weight: bold;">
                {{ product.price }} —Ä—É–±.
            </div>
        </div>
        
        <p>{{ product.description|truncatewords:15 }}</p>
        
        <div style="color: #666; font-size: 0.9em;">
            <span style="color: {% if product.status == 'in_stock' %}#27ae60{% else %}#e67e22{% endif %};">
                {{ product.get_status_display }}
            </span>
            {% if product.category %}
            <span style="margin-left: 10px;">üìÅ {{ product.category.name }}</span>
            {% endif %}
        </div>
        
        <div class="product-actions">
            <a href="{% url 'product_detail' product.id %}" class="btn btn-primary">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            <a href="{% url 'product_edit' product.id %}" class="btn btn-warning">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
    <div style="text-align: center; padding: 40px;">
        <h3>üòî –ü—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
        <p>–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤. <a href="{% url 'product_create' %}">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç</a>.</p>
    </div>
{% endif %}
{% endblock %}